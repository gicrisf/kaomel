; -*- mode: emacs-lisp; lexical-binding: t -*-

;; Uncomment some calls below as needed for your project.
;(eldev-use-package-archive 'gnu-elpa)
;(eldev-use-package-archive 'nongnu-elpa)
(eldev-use-package-archive 'melpa)

;; Development dependencies
(eldev-add-extra-dependencies 'lint 'elisp-lint)
(eldev-add-extra-dependencies 'test 'json)

;; Configure elisp-lint for mixed indentation (standard Emacs Lisp style)
(with-eval-after-load 'elisp-lint
  (setq-default indent-tabs-mode nil))

;; Builder for generating kaomel-data.el from kaomoji.json
;; Ignore the warning; it comes from targets that use macro syntax
(eldev-defbuilder kaomel-data-generator (source target)
  :short-name     "data"
  :message        source-and-target
  :source-files   "kaomoji.json"
  :targets        ("kaomoji.json" -> "kaomel-data.el")
  :collect        ":default"
  :define-cleaner (eldev-cleaner-kaomel-data
                   "Delete generated kaomel-data.el file."
                   :aliases data)
  (load-file "kaomel-utils.el")
  (kaomel-dev--generate-data-file source target))
